pipeline () {
	agent any
	stages {
	    stage('clean_up'){
	    	steps{
		  sh '''
		    docker rmi -f i7:latest floydz/banglore:latest
		    docker volume rm vol8
		    docker rm -f c6 c14
		  '''
		}
	    }
	    stage ('building_image') {
	       steps {
                 sh 'docker build -t i7 /var/lib/jenkins/workspace/git_integrate'
               }
             }
             
              stage ('tagging_image') {
	        steps {
	           sh 'docker tag i7:latest floydz/banglore:latest'
	         }
               }
            
               stage ('creating_volume') {
	          steps {
	            sh 'docker volume create vol8'
	           }	
               }
               stage ('create_vol_container') {
	          steps {
		     sh 'docker run -d --name c6 -p 8012:80 -v vol8:/var/www/html i7 /bin/bash'
	          }
	       }  
	       stage ('verifying_container') {
	          steps {
		     sh 'docker container ls -a | grep c6'
		  }
	       }
               stage ('pushing_image') {
	          
	       environment {
	                    registry = "floydz/hari"
			    registrycredential = 'abhigaduking3978@'
	       
	       }
	             steps {
		         sh 'docker push floydz/banglore:latest'
	             }
               }
               stage ('creating_container') {
	             steps {
	                 sh 'docker run -d --name c14 -p 8015:80 i7 /bin/bash'
	    	     }
               }	
         }
} 
